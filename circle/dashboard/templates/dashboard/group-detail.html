{% extends "dashboard/base.html" %}
{% load i18n %}

{% block content %}
<div class="body-content">
  <div class="page-header">
    <div class="pull-right" style="padding-top: 15px;">
      <a title="{% trans "Rename" %}" href="#" class="btn btn-default btn-xs group-details-rename-button"><i class="icon-pencil"></i></a>
      <a title="{% trans "Delete" %}" data-group-pk="{{ group.pk }}" class="btn btn-default btn-xs real-link group-delete" href="{% url "dashboard.views.delete-group" pk=group.pk %}"><i class="icon-trash"></i></a>
      <a title="{% trans "Help" %}" href="#" class="btn btn-default btn-xs group-details-help-button"><i class="icon-question"></i></a>
    </div>
   <h1>
      <div id="group-details-rename">
        <form action="" method="POST" id="group-details-rename-form">
          {% csrf_token %}
          <input id="group-details-rename-name" class="form-control" name="new_name" type="text" value="{{ group.name }}"/> 
          <button type="submit" id="group-details-rename-submit" class="btn">{% trans "Rename" %}</button>
        </form>
      </div>
      <div id="group-details-h1-name">
        {{ group.name }} 
      </div>
    </h1>
  </div>
  <div class="row">
    <div class="col-md-4" id="group-info-pane">
      <div class="big">
 	 <div class="btn-group">
          <button type="button" class="btn btn-warning nojs-dropdown-toogle dropdown-toggle" data-toggle="dropdown">Action 		<i class="icon-caret-down"></i></button>
          <ul class="nojs-dropdown-menu dropdown-menu" role="menu">
            <li><a href="#" class="group-details-rename-button"><i class="icon-pencil"></i>{% trans "Rename" %}</a></li>
            <li><a data-group-pk="{{ group.pk }}" class="group-delete" href="{% url "dashboard.views.delete-group" pk=group.pk %}"><i class="icon-remove"></i> Discard</a></li>
	</ul>
        </div>
      </div>
    </div>
    <div class="col-md-8" id="group-detail-pane">
      <div class="panel panel-default" id="group-detail-panel">
        <div class="tab-content panel-body">

<h3>{% trans "User list"|capfirst %}</h3>
<table class="table table-striped table-with-form-fields">
    <tbody>
     <thead><tr><th></th><th>{% trans "Who" %}</th><th></th><th></th></tr></thead>
        {% for i in users %}
	<tr><td><i class="icon-user"></i></td><td>{{i.username}}</td>
		<td><a data-group-pk="{{ i.pk }}" href="#" class="real-link groupuser-delete btn btn-link btn-xs"><i class="icon-remove"><span class="sr-only">{% trans "remove" %}</span></i></a></td></tr>
        {% endfor %}
        <tr><td><i class="icon-plus"></i></td>
            <td><input type="text" class="form-control" name="perm-new-name"
                placeholder="{% trans "Name of group or user" %}"></td>
        </tr>
  </tbody>
  </table>

<h3>{% trans "Permissions"|capfirst %}</h3>
  <form action="{{acl.url}}" method="post">{% csrf_token %}
  <table class="table table-striped table-with-form-fields">
    <thead><tr><th></th><th>{% trans "Who" %}</th><th>{% trans "What" %}</th><th></th></tr></thead>
    <tbody>
        {% for i in acl.users %}
        <tr><td><i class="icon-user"></i></td><td>{{i.user}}</td>
            <td><select class="form-control" name="perm-u-{{i.user.id}}">
                    {% for id, name in acl.levels %}
                    <option{%if id = i.level%} selected="selected"{%endif%} value="{{id}}">{{name}}</option>
                    {% endfor %}
            </select></td>
            <td class="user-remove"><a href="#" class="btn btn-link btn-xs"><i class="icon-remove"><span class="sr-only">{% trans "remove" %}</span></i></a></td></tr>
        {% endfor %}
        <tr><td><i class="icon-plus"></i></td>
            <td><input type="text" class="form-control" name="perm-new-name"
                placeholder="{% trans "Name of group or user" %}"></td>
            <td><select class="form-control" name="perm-new">
                    {% for id, name in acl.levels %}
                    <option value="{{id}}">{{name}}</option>
                    {% endfor %}
            </select></td><td></td>
        </tr>
  </tbody>
  </table>
	  <textarea class="form-control"></textarea>

  <div class="form-actions panel-body">
    <button type="submit" class="btn btn-success">{% trans "Save" %}</button>
  </div>
  </form>


	</div>
     </div>
    </div>
  </div>
</div>
<script src="{{ STATIC_URL}}dashboard/group-details.js"></script>
{% endblock %}
