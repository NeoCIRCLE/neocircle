{% load i18n %}
<div class="panel panel-default">
  <div class="panel-heading">
    <div class="pull-right toolbar">
      <div class="btn-group">
        <a href="#index-graph-view" data-index-box="vm" class="btn btn-default btn-xs"><i class="icon-dashboard"></i></a>
        <a href="#index-list-view" data-index-box="vm" class="btn btn-default btn-xs disabled"><i class="icon-list"></i></a>
      </div>
      <span class="btn btn-default btn-xs infobtn" title="{% trans "Help" %}"><i class="icon-info-sign"></i></span>
    </div>
    <h3 class="no-margin">
      <i class="icon-desktop"></i> Virtual machines
    </h3>
  </div>
  <div class="list-group" id="vm-list-view">
    <div id="dashboard-vm-list">
      {% for i in instances %}
      <a href="{{ i.get_absolute_url }}" class="list-group-item">
        <i class="{{ i.get_status_icon }}" title="{{ i.get_status_display }}"></i> {{ i.name }}
        <small class="text-muted">{{ i.primary_host.hostname }}</small>
        <div class="pull-right dashboard-vm-favourite" data-vm="{{ i.pk }}">
          {% if i.fav %}
            <i class="icon-star text-primary title-favourite" title="Unfavourite"></i>
          {% else %}
            <i class="icon-star-empty text-primary title-favourite" title="Mark as favorite"></i>
          {% endif %}
        </div>
      </a>
      {% endfor %}
    </div>
    <div href="#" class="list-group-item list-group-footer">
      <div class="row">
        <div class="col-sm-6 col-xs-6 input-group input-group-sm">
          <input id="dashboard-vm-search-input" type="text" class="form-control" placeholder="{% trans "Search..." %}" />
          <div class="input-group-btn">
            <button type="submit" class="form-control btn btn-primary" title="search"><i class="icon-search"></i></button>
          </div>
        </div>
        <div class="col-sm-6 text-right">
          {% if more_instances > 0 %}
          <a class="btn btn-primary btn-xs" href="{% url "dashboard.views.vm-list" %}">
            <i class="icon-chevron-sign-right"></i> {% blocktrans with more_instances=more_instances %}<strong>{{ more_instances }}</strong>  more{% endblocktrans %}
          </a>
          {% endif %}
          <a class="btn btn-success btn-xs vm-create" href="{% url "dashboard.views.vm-create" %}"><i class="icon-plus-sign"></i> {% trans "new" %}</a>
        </div>
      </div>
    </div>
  </div>
  <div class="panel-body" id="vm-graph-view" style="display: none">
    <p class="pull-right">  <input class="knob" data-fgColor="chartreuse" data-thickness=".4" data-max="{{ request.user.profile.instance_limit }}" data-width="100" data-height="100" data-readOnly="true" value="{{ instances|length|add:more_instances }}"></p>
    <p><span class="bigbig"><big>{{ running_vm_num }}</big> running </span>
      <ul class="list-inline">
        {% for vm in running_vms %}
          <li class="label label-success">
            <a href="vm.get_absolute_url" title="{{vm.primary_host.get_fqdn}}"><i class="icon-play-sign"></i> {{ vm.name}}</a>
          </li>
        {% endfor %}
      </ul>
    </p>
    <p class="big text-warning"><big>{{ stopped_vm_num }}</big> stopped</p>

    <div class="clearfix"></div>
    <div class="text-right">
      <a href="{% url "dashboard.views.vm-list" %}" class="btn btn-primary btn-xs"><i class="icon-chevron-sign-right"></i> <strong>{{ instances|length|add:more_instances }}</strong>  machines  total</a> 
    </div>
  </div>
</div>
